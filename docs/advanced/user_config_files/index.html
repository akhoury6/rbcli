<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.74.3" />
    <meta name="description" content="">


    <link rel="icon" href="/rbcli/images/favicon.png" type="image/png">

    <title>User Configuration Files :: RBCli Documentation</title>

    
    <link href="/rbcli/css/nucleus.css?1596148729" rel="stylesheet">
    <link href="/rbcli/css/fontawesome-all.min.css?1596148729" rel="stylesheet">
    <link href="/rbcli/css/hybrid.css?1596148729" rel="stylesheet">
    <link href="/rbcli/css/featherlight.min.css?1596148729" rel="stylesheet">
    <link href="/rbcli/css/perfect-scrollbar.min.css?1596148729" rel="stylesheet">
    <link href="/rbcli/css/auto-complete.css?1596148729" rel="stylesheet">
    <link href="/rbcli/css/atom-one-dark-reasonable.css?1596148729" rel="stylesheet">
    <link href="/rbcli/css/theme.css?1596148729" rel="stylesheet">
    <link href="/rbcli/css/hugo-theme.css?1596148729" rel="stylesheet">
    
    <link href="/rbcli/css/theme-blue.css?1596148729" rel="stylesheet">
    
    

    <script src="/rbcli/js/jquery-3.3.1.min.js?1596148729"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/rbcli/advanced/user_config_files/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://akhoury6.github.io/rbcli/" style="font-size: 40px">
  <span class="fas fa-terminal"></span>&nbsp;ùöÅùô±ùô≤ùöïùöí
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/rbcli/js/lunr.min.js?1596148729"></script>
<script type="text/javascript" src="/rbcli/js/auto-complete.js?1596148729"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/akhoury6.github.io\/rbcli\/";
    
</script>
<script type="text/javascript" src="/rbcli/js/search.js?1596148729"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/rbcli/quick_reference/" title="Quick Reference" class="dd-item 
        
        
        
        ">
      <a href="/rbcli/quick_reference/">
          Quick Reference
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/rbcli/tutorial/" title="Tutorial" class="dd-item 
        
        
        
        ">
      <a href="/rbcli/tutorial/">
          Tutorial
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/rbcli/tutorial/10-getting_started/" title="Getting Started" class="dd-item ">
        <a href="/rbcli/tutorial/10-getting_started/">
        <b>1. </b>Getting Started
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rbcli/tutorial/20-project_layout/" title="The Project Layout" class="dd-item ">
        <a href="/rbcli/tutorial/20-project_layout/">
        <b>2. </b>The Project Layout
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rbcli/tutorial/30-your_first_command/" title="Your First Command" class="dd-item ">
        <a href="/rbcli/tutorial/30-your_first_command/">
        <b>3. </b>Your First Command
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rbcli/tutorial/40-options_parameters_and_arguments/" title="Options, Parameters, and Arguments" class="dd-item ">
        <a href="/rbcli/tutorial/40-options_parameters_and_arguments/">
        <b>4. </b>Options, Parameters, and Arguments
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rbcli/tutorial/50-publishing/" title="Publishing Your Application" class="dd-item ">
        <a href="/rbcli/tutorial/50-publishing/">
        <b>5. </b>Publishing Your Application
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/rbcli/advanced/" title="Advanced" class="dd-item 
        parent
        
        
        ">
      <a href="/rbcli/advanced/">
          Advanced
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/rbcli/advanced/automatic_updates/" title="Automatic Updates" class="dd-item ">
        <a href="/rbcli/advanced/automatic_updates/">
        Automatic Updates
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rbcli/advanced/command_types/" title="Command Types" class="dd-item ">
        <a href="/rbcli/advanced/command_types/">
        Command Types
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rbcli/advanced/distributed_state_locking/" title="Distributed State and Locking" class="dd-item ">
        <a href="/rbcli/advanced/distributed_state_locking/">
        Distributed State and Locking
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rbcli/advanced/hooks/" title="Execution Hooks" class="dd-item ">
        <a href="/rbcli/advanced/hooks/">
        Execution Hooks
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rbcli/advanced/interactive_commands/" title="Interactive Commands" class="dd-item ">
        <a href="/rbcli/advanced/interactive_commands/">
        Interactive Commands
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rbcli/advanced/logging/" title="Logging" class="dd-item ">
        <a href="/rbcli/advanced/logging/">
        Logging
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rbcli/advanced/remote_execution/" title="Remote Execution" class="dd-item ">
        <a href="/rbcli/advanced/remote_execution/">
        Remote Execution
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rbcli/advanced/state_storage/" title="State Storage" class="dd-item ">
        <a href="/rbcli/advanced/state_storage/">
        State Storage
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rbcli/advanced/user_config_files/" title="User Configuration Files" class="dd-item active">
        <a href="/rbcli/advanced/user_config_files/">
        User Configuration Files
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/rbcli/development/" title="Development" class="dd-item 
        
        
        
        ">
      <a href="/rbcli/development/">
          Development
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/rbcli/development/contributing/" title="Contribution Guide" class="dd-item ">
        <a href="/rbcli/development/contributing/">
        Contribution Guide
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rbcli/development/license/" title="License Info" class="dd-item ">
        <a href="/rbcli/development/license/">
        License Info
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rbcli/development/code_of_conduct/" title="Code of Conduct" class="dd-item ">
        <a href="/rbcli/development/code_of_conduct/">
        Code of Conduct
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/rbcli/development/changelog/" title="Changelog" class="dd-item ">
        <a href="/rbcli/development/changelog/">
        Changelog
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/rbcli/whoami/" title="My Letter To You" class="dd-item 
        
        
        
        ">
      <a href="/rbcli/whoami/">
          My Letter To You
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/akhoury6/rbcli"><i class='fab fa-github'></i> Github repo</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://rubygems.org/gems/rbcli"><i class='far fa-gem'></i> Rubygems</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/rbcli/'></a> > <a href='/rbcli/advanced/'>Advanced</a> > User Configuration Files
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#defaults-chain">Defaults chain</a></li>
    <li><a href="#user-chain">User chain</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              User Configuration Files
            </h1>
          

        


<p>RBCli provides built-in support for creating and managing userspace configuration files. It does this through two chains: the <strong>defaults chain</strong> and the <strong>user chain</strong>.</p>
<h2 id="defaults-chain">Defaults chain</h2>
<p>The defaults chain allows you to specify sane defaults for your CLI tool throughout your code. This gives you the ability to declare configuration alongside the code, and allows RBCli to generate a user config automatically given your defaults. There are two ways to set them:</p>
<ul>
<li>YAML Files
<ul>
<li>You can store your defaults in one or more YAML files and RBCli will import and combine them. Note that when generating the user config, RBCli will use the YAML text as-is, so comments are transferred as well. This allows you to write descriptions for the options directly in the file that the user can see.</li>
<li>This is good for tools with large or complex configuration that needs user documentation written inline</li>
<li>These YAML files should be placed in the <code>userconf/</code> directory in your project and they will automatically be loaded</li>
</ul>
</li>
<li>DSL Statements
<ul>
<li>In the DSL, you can specify options individually by providing a name, description, and default value</li>
<li>This is good for simpler configuration, as the descriptions provided are written out as comments in the generated user config</li>
<li>You can put global configuration options in <code>config/userspace.rb</code></li>
<li>Command-specific confiugration can be placed in the command declarations in <code>application/commands/*.rb</code></li>
</ul>
</li>
</ul>
<p>DSL statements appear in both of the above locations as the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">config_default <span style="color:#e6db74">:name</span>, <span style="color:#e6db74">description</span>: <span style="color:#e6db74">&#39;&lt;description_help_text&gt;&#39;</span>, <span style="color:#e6db74">default</span>: <span style="color:#e6db74">&#39;&lt;default_value&gt;&#39;</span>
</code></pre></div><h2 id="user-chain">User chain</h2>
<p>The user chain has two functions: generating and loading configuration from a YAML file on the end user&rsquo;s machine.</p>
<p>Rbcli will determine the correct location to locate the user configuration based on two factors:</p>
<ol>
<li>The default location set in <code>config/userspace.rb</code></li>
<li>The location specified on the command line using the <code>--config-file=&lt;filename&gt;</code> option (overrides #1)</li>
</ol>
<p>To configure the default location, edit <code>config/userspace.rb</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">config_userfile <span style="color:#e6db74">&#39;~/.mytool&#39;</span>, <span style="color:#e6db74">merge_defaults</span>: <span style="color:#66d9ef">true</span>, <span style="color:#e6db74">required</span>: <span style="color:#66d9ef">false</span>
</code></pre></div><ul>
<li><code>path/to/config/file</code>
<ul>
<li>Self explanatory. Recommended locations are a dotfile in the user&rsquo;s home directory, or a file under <code>/etc</code> such as <code>/etc/mytool/userconf.yaml</code></li>
</ul>
</li>
<li><code>merge_defaults</code>
<ul>
<li>If set to <code>true</code>, default settings override user settings. If set to <code>false</code>, default settings are not loaded at all and the user is required to have all values specified in their config.</li>
</ul>
</li>
<li><code>required</code>
<ul>
<li>If set to <code>true</code> the application will not run if the file does not exist. A message will be displayed to the user to run your application with the <code>--generate-config</code> option to generate the file given your specified defaults.</li>
</ul>
</li>
</ul>
<p>Users can generate configs by running <code>yourclitool --generate-config</code>. This will generate a config file at the tool&rsquo;s default location specified in the DSL. This location can be overridden via the <code>--config-file=&lt;filename&gt;</code> option.</p>


<footer class="footline">
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/rbcli/advanced/state_storage/" title="State Storage"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/rbcli/development/" title="Development" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/rbcli/js/clipboard.min.js?1596148729"></script>
    <script src="/rbcli/js/perfect-scrollbar.min.js?1596148729"></script>
    <script src="/rbcli/js/perfect-scrollbar.jquery.min.js?1596148729"></script>
    <script src="/rbcli/js/jquery.sticky.js?1596148729"></script>
    <script src="/rbcli/js/featherlight.min.js?1596148729"></script>
    <script src="/rbcli/js/highlight.pack.js?1596148729"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/rbcli/js/modernizr.custom-3.6.0.js?1596148729"></script>
    <script src="/rbcli/js/learn.js?1596148729"></script>
    <script src="/rbcli/js/hugo-learn.js?1596148729"></script>

    <link href="/rbcli/mermaid/mermaid.css?1596148729" rel="stylesheet" />
    <script src="/rbcli/mermaid/mermaid.js?1596148729"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

