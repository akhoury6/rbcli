<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.55.6" />
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Your First Command :: RBCli Documentation</title>

    
    <link href="/css/nucleus.css?1561062920" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1561062920" rel="stylesheet">
    <link href="/css/hybrid.css?1561062920" rel="stylesheet">
    <link href="/css/featherlight.min.css?1561062920" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1561062920" rel="stylesheet">
    <link href="/css/auto-complete.css?1561062920" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1561062920" rel="stylesheet">
    <link href="/css/theme.css?1561062920" rel="stylesheet">
    <link href="/css/hugo-theme.css?1561062920" rel="stylesheet">
    
      <link href="/css/theme-blue.css?1561062920" rel="stylesheet">
    

    <script src="/js/jquery-3.3.1.min.js?1561062920"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/tutorial/30-your_first_command/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://akhoury6.github.io" style="font-size: 40px">
  <span class="fas fa-terminal"></span>&nbsp;ùöÅùô±ùô≤ùöïùöí
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1561062920"></script>
<script type="text/javascript" src="/js/auto-complete.js?1561062920"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/akhoury6.github.io";
    
</script>
<script type="text/javascript" src="/js/search.js?1561062920"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/quick_reference/" title="Quick Reference" class="dd-item 
        
        
        
        ">
      <a href="/quick_reference/">
          Quick Reference
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/tutorial/" title="Tutorial" class="dd-item 
        parent
        
        
        ">
      <a href="/tutorial/">
          Tutorial
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/tutorial/10-getting_started/" title="Getting Started" class="dd-item ">
        <a href="/tutorial/10-getting_started/">
        <b>1. </b>Getting Started
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tutorial/20-project_layout/" title="The Project Layout" class="dd-item ">
        <a href="/tutorial/20-project_layout/">
        <b>2. </b>The Project Layout
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tutorial/30-your_first_command/" title="Your First Command" class="dd-item active">
        <a href="/tutorial/30-your_first_command/">
        <b>3. </b>Your First Command
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tutorial/40-options_parameters_and_arguments/" title="Options, Parameters, and Arguments" class="dd-item ">
        <a href="/tutorial/40-options_parameters_and_arguments/">
        <b>4. </b>Options, Parameters, and Arguments
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tutorial/50-publishing/" title="Publishing Your Application" class="dd-item ">
        <a href="/tutorial/50-publishing/">
        <b>5. </b>Publishing Your Application
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/advanced/" title="Advanced" class="dd-item 
        
        
        
        ">
      <a href="/advanced/">
          Advanced
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/advanced/automatic_updates/" title="Automatic Updates" class="dd-item ">
        <a href="/advanced/automatic_updates/">
        Automatic Updates
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/advanced/command_types/" title="Command Types" class="dd-item ">
        <a href="/advanced/command_types/">
        Command Types
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/advanced/distributed_state_locking/" title="Distributed State and Locking" class="dd-item ">
        <a href="/advanced/distributed_state_locking/">
        Distributed State and Locking
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/advanced/hooks/" title="Execution Hooks" class="dd-item ">
        <a href="/advanced/hooks/">
        Execution Hooks
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/advanced/interactive_commands/" title="Interactive Commands" class="dd-item ">
        <a href="/advanced/interactive_commands/">
        Interactive Commands
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/advanced/logging/" title="Logging" class="dd-item ">
        <a href="/advanced/logging/">
        Logging
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/advanced/remote_execution/" title="Remote Execution" class="dd-item ">
        <a href="/advanced/remote_execution/">
        Remote Execution
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/advanced/state_storage/" title="State Storage" class="dd-item ">
        <a href="/advanced/state_storage/">
        State Storage
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/advanced/user_config_files/" title="User Configuration Files" class="dd-item ">
        <a href="/advanced/user_config_files/">
        User Configuration Files
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/development/" title="Development" class="dd-item 
        
        
        
        ">
      <a href="/development/">
          Development
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/development/contributing/" title="Contribution Guide" class="dd-item ">
        <a href="/development/contributing/">
        Contribution Guide
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/development/license/" title="License Info" class="dd-item ">
        <a href="/development/license/">
        License Info
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/development/code_of_conduct/" title="Code of Conduct" class="dd-item ">
        <a href="/development/code_of_conduct/">
        Code of Conduct
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/development/changelog/" title="Changelog" class="dd-item ">
        <a href="/development/changelog/">
        Changelog
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/whoami/" title="My Letter To You" class="dd-item 
        
        
        
        ">
      <a href="/whoami/">
          My Letter To You
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/akhoury6/rbcli"><i class='fab fa-github'></i> Github repo</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://rubygems.org/gems/rbcli"><i class='far fa-gem'></i> Rubygems</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'></a> > <a href='/tutorial/'>Tutorial</a> > Your First Command
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#creating-the-command">Creating the Command</a></li>
<li><a href="#the-command-declaration">The Command Declaration</a></li>
<li><a href="#creating-the-list-command">Creating the &ldquo;list&rdquo; Command</a></li>
<li><a href="#next-steps">Next Steps</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Your First Command
            </h1>
          

        





<h2 id="creating-the-command">Creating the Command</h2>

<p>Creating the command is straightforward:</p>

<pre><code class="language-bash">rbcli command --name=list
#or
rbcli command -n list
</code></pre>

<p>And there you have it! Now you can try out your command by typing:</p>

<pre><code class="language-bash">./exe/mytool list
</code></pre>

<p>Congrats! You should now see a generic output listing the values of several variables. We&rsquo;ll get into what they mean in a bit, but first, let&rsquo;s make the tool&rsquo;s execution a bit easier.</p>

<p>Now that you know your way around a project, its time to create your first command! But before we do, let&rsquo;s make development just a little bit easier. Go to the base directory of the folder and type:</p>

<pre><code class="language-bash">alias mytool=&quot;$(pwd)/exe/mytool&quot;
</code></pre>

<p>And now you&rsquo;ll be able to execute your application as if it was already installed as a gem, without worrying about the working path. You can see this in action by running your application again, but without the path:</p>

<pre><code class="language-bash">mytool list
</code></pre>

<p>So, now let&rsquo;s take a more in-dpeth look at what the command code looks like.</p>

<h2 id="the-command-declaration">The Command Declaration</h2>

<p>As mentioned in the previous section, you can find your commands listed under the <code>application/commands/</code> directory. Each command will appear as its own unique file with some base code to work from. Let&rsquo;s take a look at that code a little more in-depth:</p>

<pre><code class="language-ruby">class List &lt; Rbcli::Command                                                           # Declare a new command by subclassing Rbcli::Command
	description 'TODO: Description goes here'                                           # (Required) Short description for the global help
	usage &lt;&lt;-EOF
TODO: Usage text goes here
EOF                                                                                   # (Required) Long description for the command-specific help
	parameter :force, 'Force testing', type: :boolean, default: false, required: false  # (Optional, Multiple) Add a command-specific CLI parameter. Can be called multiple times

	config_default :myopt2, description: 'My Option #2', default: 'Default Value Here'  # (Optional, Multiple) Specify an individual configuration parameter and set a default value. These will also be included in generated user config.
                                                                                      # Alternatively, you can simply create a yaml file in the `default_user_configs` directory in your project that specifies the default values of all options

	action do |params, args, global_opts, config|                                       # (Required) Block to execute if the command is called.
		Rbcli::log.info { 'These logs can go to STDERR, STDOUT, or a file' }              # Example log. Interface is identical to Ruby's logger
		puts &quot;\nArgs:\n#{args}&quot;                    # Arguments that came after the command on the CLI (i.e.: `mytool test bar baz` will yield args=['bar', 'baz'])
		puts &quot;Params:\n#{params}&quot;                  # Parameters, as described through the option statements above
		puts &quot;Global opts:\n#{global_opts}&quot;        # Global Parameters, as descirbed in the Configurate section
		puts &quot;Config:\n#{config}&quot;                  # Config file values
		puts &quot;LocalState:\n#{Rbcli.local_state}&quot;   # Local persistent state storage (when available) -- if unsure use Rbcli.local_state.nil?
		puts &quot;RemoteState:\n#{Rbcli.remote_state}&quot; # Remote persistent state storage (when available) -- if unsure use Rbcli.remote_state.nil?
		puts &quot;\nDone!!!&quot;
	end
end
</code></pre>

<p>Commands are declared to RBCli simply by subclassing them from <code>Rbcli::Command</code> as shown above. Then, you have a list of declarations that tell RBCli information about it. They are:</p>

<ul>
<li><code>description</code>

<ul>
<li>A short description of the command, which will appear in the top-level help (when the user runs <code>mytool -h</code>).</li>
</ul></li>
<li><code>usage</code>

<ul>
<li>A description of how the command is meant to be used. This description can be as long as you want, and can be as in-depth as you&rsquo;d like. It will show up as a long, multi-line description when the user runs the command-sepcific help (<code>mytool list -h</code>).</li>
</ul></li>
<li><code>parameter</code>

<ul>
<li>Command-line tags that the user can enter that are specific to only this command. We will get into these in the next section on <a href="/tutorial/40-options_parameters_and_arguments">Options, Parameters, and Arguments</a></li>
</ul></li>
<li><code>config_default</code>

<ul>
<li>This sets a single item in the config file that will be made available to the user. More information can be found in the documentation on <a href="/advanced/user_config_files">User Config Files</a></li>
</ul></li>
<li><code>action</code>

<ul>
<li>This loads the block of code that will run when the command is called. It brings in all of the CLI and user config data as variables. We will also get into these in the next section <a href="/tutorial/40-options_parameters_and_arguments">Options, Parameters, and Arguments</a></li>
</ul></li>
</ul>

<p>There is an additional declaration not shown here, <code>extern</code>. You can find more information on it in the section on <a href="/advanced/command_types">Advanced Command Types</a></p>

<h2 id="creating-the-list-command">Creating the &ldquo;list&rdquo; Command</h2>

<p>Now we&rsquo;re going to modify this command to list the contents of the current directory to the terminal. So let&rsquo;s change the code in that file to:</p>

<pre><code class="language-ruby">class List &lt; Rbcli::Command
	description %q{List files in current directory}
	usage &lt;&lt;-EOF
Ever wanted to see your files?
Now you can!
EOF

	action do |params, args, global_opts, config|
		filelist = []

		# We store a list of the files in an array, including dotfiles if specified
		Dir.glob &quot;./*&quot; do |filename|
			outname = filename.split('/')[1]
			outname += '/' if File.directory? filename
			filelist.append outname
		end
		
		# Apply color
		filelist.map! do |filename|
			if File.directory? filename
				filename.light_blue
			elsif File.executable? filename
				filename.light_green
			else
				filename
			end
		end if global_opts[:color]

		puts filelist
	end
end
</code></pre>

<p>Go ahead and test it out! The output doesn&rsquo;t show much obviously, just a list of names and nothing else. Don&rsquo;t worry though, we&rsquo;ll fix that in the next secion.</p>

<h2 id="next-steps">Next Steps</h2>

<p>Next we&rsquo;re going to take a look at options, parameters, and arguments, and we&rsquo;ll clean up our list command by using them. If you&rsquo;d like to learn more about the additional command types in RBCli before continuing, see the <a href="/advanced/command_types">Advanced Command Types</a> documentation.</p>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/tutorial/20-project_layout/" title="The Project Layout"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/tutorial/40-options_parameters_and_arguments/" title="Options, Parameters, and Arguments" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1561062920"></script>
    <script src="/js/perfect-scrollbar.min.js?1561062920"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1561062920"></script>
    <script src="/js/jquery.sticky.js?1561062920"></script>
    <script src="/js/featherlight.min.js?1561062920"></script>
    <script src="/js/html5shiv-printshiv.min.js?1561062920"></script>
    <script src="/js/highlight.pack.js?1561062920"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1561062920"></script>
    <script src="/js/learn.js?1561062920"></script>
    <script src="/js/hugo-learn.js?1561062920"></script>

    <link href="/mermaid/mermaid.css?1561062920" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1561062920"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

