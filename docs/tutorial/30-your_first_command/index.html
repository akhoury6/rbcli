



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Description">
      
      
      
        <meta name="author" content="Andrew Khoury">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.3, mkdocs-material-3.0.4">
    
    
      
        <title>Your First Command - RBCli Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../#your-first-command" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="RBCli Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon">devices</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                RBCli Documentation
              </span>
              <span class="md-header-nav__topic">
                Your First Command
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/akhoury6/rbcli/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." title="Home" class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../10-getting_started/" title="Tutorial" class="md-tabs__link md-tabs__link--active">
          Tutorial
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../advanced/command_types/" title="Advanced Features" class="md-tabs__link">
          Advanced Features
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../development/contributing/" title="Development" class="md-tabs__link">
          Development
        </a>
      
    </li>
  

      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="RBCli Documentation" class="md-nav__button md-logo">
      
        <i class="md-icon">devices</i>
      
    </a>
    RBCli Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/akhoury6/rbcli/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../imported/quick_reference/" title="Quick Reference" class="md-nav__link">
      Quick Reference
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Tutorial
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Tutorial
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../10-getting_started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../20-project_layout/" title="The Project Layout" class="md-nav__link">
      The Project Layout
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Your First Command
      </label>
    
    <a href="./" title="Your First Command" class="md-nav__link md-nav__link--active">
      Your First Command
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creating-the-command" title="Creating the Command" class="md-nav__link">
    Creating the Command
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-command-declaration" title="The Command Declaration" class="md-nav__link">
    The Command Declaration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-list-command" title="Creating the "list" Command" class="md-nav__link">
    Creating the "list" Command
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" title="Next Steps" class="md-nav__link">
    Next Steps
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../40-options_parameters_and_arguments/" title="Options, Parameters, and Arguments" class="md-nav__link">
      Options, Parameters, and Arguments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../50-publishing/" title="Publishing and Distribution" class="md-nav__link">
      Publishing and Distribution
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Advanced Features
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Advanced Features
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced/command_types/" title="Command Types" class="md-nav__link">
      Command Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced/user_config_files/" title="User Config Files" class="md-nav__link">
      User Config Files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced/hooks/" title="Hooks" class="md-nav__link">
      Hooks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced/logging/" title="Logging" class="md-nav__link">
      Logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced/automatic_updates/" title="Automatic Updates" class="md-nav__link">
      Automatic Updates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced/state_storage/" title="State Storage" class="md-nav__link">
      State Storage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced/distributed_state_locking/" title="Distributed State Locking" class="md-nav__link">
      Distributed State Locking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced/remote_execution/" title="Remote Execution" class="md-nav__link">
      Remote Execution
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../advanced/interactive_commands/" title="Interactive Commands" class="md-nav__link">
      Interactive Commands
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/contributing/" title="Contribution Guide" class="md-nav__link">
      Contribution Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/license/" title="License Info" class="md-nav__link">
      License Info
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/code_of_conduct/" title="Code of Conduct" class="md-nav__link">
      Code of Conduct
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../imported/changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../whoami/" title="whoami" class="md-nav__link">
      whoami
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creating-the-command" title="Creating the Command" class="md-nav__link">
    Creating the Command
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-command-declaration" title="The Command Declaration" class="md-nav__link">
    The Command Declaration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-list-command" title="Creating the "list" Command" class="md-nav__link">
    Creating the "list" Command
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" title="Next Steps" class="md-nav__link">
    Next Steps
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="your-first-command">Your First Command</h1>
<h2 id="creating-the-command">Creating the Command</h2>
<p>Creating the command is straightforward:</p>
<pre><code class="bash">rbcli command --name=list
#or
rbcli command -n list
</code></pre>

<p>And there you have it! Now you can try out your command by typing:</p>
<pre><code class="bash">./exe/mytool list
</code></pre>

<p>Congrats! You should now see a generic output listing the values of several variables. We'll get into what they mean in a bit, but first, let's make the tool's execution a bit easier.</p>
<p>Now that you know your way around a project, its time to create your first command! But before we do, let's make development just a little bit easier. Go to the base directory of the folder and type:</p>
<pre><code class="bash">alias mytool=&quot;$(pwd)/exe/mytool&quot;
</code></pre>

<p>And now you'll be able to execute your application as if it was already installed as a gem, without worrying about the working path. You can see this in action by running your application again, but without the path:</p>
<pre><code class="bash">mytool list
</code></pre>

<p>So, now let's take a more in-dpeth look at what the command code looks like.</p>
<h2 id="the-command-declaration">The Command Declaration</h2>
<p>As mentioned in the previous section, you can find your commands listed under the <code>application/commands/</code> directory. Each command will appear as its own unique file with some base code to work from. Let's take a look at that code a little more in-depth:</p>
<pre><code class="ruby">class List &lt; Rbcli::Command                                                           # Declare a new command by subclassing Rbcli::Command
    description 'TODO: Description goes here'                                           # (Required) Short description for the global help
    usage &lt;&lt;-EOF
TODO: Usage text goes here
EOF                                                                                   # (Required) Long description for the command-specific help
    parameter :force, 'Force testing', type: :boolean, default: false, required: false  # (Optional, Multiple) Add a command-specific CLI parameter. Can be called multiple times

    config_default :myopt2, description: 'My Option #2', default: 'Default Value Here'  # (Optional, Multiple) Specify an individual configuration parameter and set a default value. These will also be included in generated user config.
                                                                                      # Alternatively, you can simply create a yaml file in the `default_user_configs` directory in your project that specifies the default values of all options

    action do |params, args, global_opts, config|                                       # (Required) Block to execute if the command is called.
        Rbcli::log.info { 'These logs can go to STDERR, STDOUT, or a file' }              # Example log. Interface is identical to Ruby's logger
        puts &quot;\nArgs:\n#{args}&quot;                    # Arguments that came after the command on the CLI (i.e.: `mytool test bar baz` will yield args=['bar', 'baz'])
        puts &quot;Params:\n#{params}&quot;                  # Parameters, as described through the option statements above
        puts &quot;Global opts:\n#{global_opts}&quot;        # Global Parameters, as descirbed in the Configurate section
        puts &quot;Config:\n#{config}&quot;                  # Config file values
        puts &quot;LocalState:\n#{Rbcli.local_state}&quot;   # Local persistent state storage (when available) -- if unsure use Rbcli.local_state.nil?
        puts &quot;RemoteState:\n#{Rbcli.remote_state}&quot; # Remote persistent state storage (when available) -- if unsure use Rbcli.remote_state.nil?
        puts &quot;\nDone!!!&quot;
    end
end
</code></pre>

<p>Commands are declared to RBCli simply by subclassing them from <code>Rbcli::Command</code> as shown above. Then, you have a list of declarations that tell RBCli information about it. They are:</p>
<ul>
<li><code>description</code><ul>
<li>A short description of the command, which will appear in the top-level help (when the user runs <code>mytool -h</code>).</li>
</ul>
</li>
<li><code>usage</code><ul>
<li>A description of how the command is meant to be used. This description can be as long as you want, and can be as in-depth as you'd like. It will show up as a long, multi-line description when the user runs the command-sepcific help (<code>mytool list -h</code>).</li>
</ul>
</li>
<li><code>parameter</code><ul>
<li>Command-line tags that the user can enter that are specific to only this command. We will get into these in the next section on <a href="../40-options_parameters_and_arguments/">Options, Parameters, and Arguments</a></li>
</ul>
</li>
<li><code>config_default</code><ul>
<li>This sets a single item in the config file that will be made available to the user. More information can be found in the documentation on <a href="../../advanced/user_config_files/">User Config Files</a></li>
</ul>
</li>
<li><code>action</code><ul>
<li>This loads the block of code that will run when the command is called. It brings in all of the CLI and user config data as variables. We will also get into these in the next section <a href="../40-options_parameters_and_arguments/">Options, Parameters, and Arguments</a></li>
</ul>
</li>
</ul>
<p>There is an additional declaration not shown here, <code>extern</code>. You can find more information on it in the section on <a href="../../advanced/command_types/">Advanced Command Types</a></p>
<h2 id="creating-the-list-command">Creating the "list" Command</h2>
<p>Now we're going to modify this command to list the contents of the current directory to the terminal. So let's change the code in that file to:</p>
<pre><code class="ruby">class List &lt; Rbcli::Command
    description %q{List files in current directory}
    usage &lt;&lt;-EOF
Ever wanted to see your files?
Now you can!
EOF

    action do |params, args, global_opts, config|
        filelist = []

        # We store a list of the files in an array, including dotfiles if specified
        Dir.glob &quot;./*&quot; do |filename|
            outname = filename.split('/')[1]
            outname += '/' if File.directory? filename
            filelist.append outname
        end

        # Apply color
        filelist.map! do |filename|
            if File.directory? filename
                filename.light_blue
            elsif File.executable? filename
                filename.light_green
            else
                filename
            end
        end if global_opts[:color]

        puts filelist
    end
end
</code></pre>

<p>Go ahead and test it out! The output doesn't show much obviously, just a list of names and nothing else. Don't worry though, we'll fix that in the next secion.</p>
<h2 id="next-steps">Next Steps</h2>
<p>Next we're going to take a look at options, parameters, and arguments, and we'll clean up our list command by using them. If you'd like to learn more about the additional command types in RBCli before continuing, see the <a href="../../advanced/command_types/">Advanced Command Types</a> documentation.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../20-project_layout/" title="The Project Layout" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                The Project Layout
              </span>
            </div>
          </a>
        
        
          <a href="../40-options_parameters_and_arguments/" title="Options, Parameters, and Arguments" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Options, Parameters, and Arguments
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright © 2018 Andrew Khoury
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.3",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>